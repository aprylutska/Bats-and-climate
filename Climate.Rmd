---
title: "Climate"
author: "Alona Prylutska"
date: "2024-03-08"
output: html_document
# editor_options: 
#   markdown: 
#     wrap: 100
---

# How weather conditions during pregnancy and lactation of bats influence subadult bats development?

Here, we hypothesize that bat growth might depend on spring weather conditions. To check that, we
check, within a subadults of Noctule bats, if there are differences in growth rate among years.
We also looked for optimal growth metric covered infra-survey variation. 

# Material & Methods
## Bat Capture and Monitoring:

Bats were captured during July in the years 2008, 2011, 2014, and 2019 as part of a bat monitoring program of the National Nature Park “Homilshansky lisy”, located in the Kharkiv Oblast, Ukraine. The capture methodology involved the use of nylon mist nets (12 х 3 meters, mesh size - 15 mm). Mist nets were consistently deployed at the same 9 locations each year of the monitoring. A total of 18 capture nights were conducted annually, with mist nets set from sunset until sunrise. Body weight measurements, rounded to the nearest 0.1 gram, and forearm length measurements, rounded to the nearest 0.1 millimeter, were obtained within 8-10 hours following the capture events.

Data collected during the capture process included bat species identification, sex and age determination. Age classification was primarily based on the degree of ossification observed in the joints of the finger phalanx of the wing, the size and morphology of nipples for female bats, and for *Nyctalus noctula* specifically, the wear pattern of canine teeth. All captured bats underwent biometric assessments before being promptly released back into their natural habitat. All procedures involved in the capture, handling, and transportation of bats were conducted with strict adherence to ethical standards and principles of animal welfare and conservation, as outlined by Gannon (2007).

Weather Data Acquisition and Analysis: Weather data, encompassing precipitation (Prcp), minimum temperature (Tmin), and maximum temperature (Tmax), for the study area were obtained using the easyclimate R package. Additional weather variables, including diurnal temperature range, mean daily temperature, positive daily temperature, and Growing Degree Units (the sum of mean daily temperatures above 0°C from the commencement of the year), were computed for further analysis.

The analysis focused on two distinct periods deemed crucial for bat growth: the spring period, spanning from March 25th to May 24th, characterized as the pre-natal phase for bat pups, and the summer period, extending from May 25th to June 24th, considered as the early post-natal phase preceding the captures. Due to the occurrence of a leap year in 2008, adjustments were made for Julian days accordingly.

Research Question and Hypotheses: Whether weather conditions during the periods of pregnancy and lactation influence the growth of young bats? It was hypothesized that years characterized by warmer and drier conditions during spring would correspond to larger sizes in subadult bats.

A total of 736 subadult bats from two species, Nyctalus noctula and Myotis daubentonii were taken for the analysis.

## Data preparation
Setting up a session

```{r, echo=FALSE}
rm(list = ls()) # reset R's brain
library(lubridate)  
library(ggplot2)
library(tidyverse) # for data manipulations
library(easyclimate) # for daily climate data extraction
library(sf) # for spatial operations
# library(patchwork)
library(jtools)

# Set custom theme for ggplot2 plots
mytheme <- theme_bw() +
  theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank())

# if LC_TIME=uk_UA.UTF-8, your months will be in Ukrainian.
# To fix that, you need to re-map locate into US (will be back after restart R session)

# Set locale to get English months names
# Sys.setlocale("LC_TIME", "en_US.UTF-8") # for Linux
# Sys.setlocale("LC_TIME", "English") # for Windows


# Read data and prepare it for further analyses
df <- read.csv("Homolsha_all_years.csv") # read data from *.csv file

# Set variables classes
df$date <- as.Date(df$Data, "%d.%m.%Y") # convert date to R Data format
df$Place <- as.factor(df$Place)
df$Species <- as.factor(df$Species)
df$sex <- as.factor(df$sex)
df$age <- as.factor(df$age)

df$Year <- year(df$date) #виокремлення року
df$Year <-as.factor (df$Year)
#створення нової колонки з даними про день від початку року 
df$day <- yday(df$date)


df$Ra <- sub(",", ".", df$Ra) #заміна ком на крапки в промірах передпліччя
df$W <- sub(",", ".", df$W)

df$Ra <-as.numeric (df$Ra) #присвоєння промірам нумеричного типу даних
df$W <-as.numeric (df$W)

# Delete unused variables
df$Data <- NULL
df$reproductive.status <- NULL

# Drop rows with NAs in W and Ra
df <- df[!is.na(df$W) & !is.na(df$Ra),]

# Loaded packages with their versions
sessionInfo() # to check your locale
```

Take a look at the data
```{r}
summary(df)
```

Check age structure among species
```{r, echo=FALSE}
table (df$Species,df$age)
```

Select only subadult Noctule bats

```{r}
# Subset only some species (e.g., N.noc. , M.daubentonii)
df <- subset(df,
              Species %in% c('Nyctalus noctula'
                              #,'Myotis daubentonii'
                             ) &
                age == "sad"
              )

summary (df)
```

Since we have nights ("days") with very few bats captured, we decided to drop the nights with less then 10 bats.

```{r}
df <- df |> 
  # count bats per day
  count(date) |>
  # choose days where more than 10 bats
  filter(n > 10) |> 
  # subset with days where more than 10 bats
  inner_join(df)
```


## Exploration of the dynamics of growth metrics 
How Ra related to W?

```{r, message=FALSE, warning=FALSE}
ggplot(data = df, aes(Ra, W
                      , colour = Year
                      )
       ) +
  geom_point(alpha = 0.5) + 
  geom_smooth(method = "lm", aes(fill = Year)) + 
  labs(x = "Forearm length, mm",
       y = "Weight, g") +
  # facet_wrap(vars(sex)) +
  mytheme
```

Bats with bigger forearm (Ra) have higher mass (W), and vice versa, regardless of year of capture.

Is there any sex differences in growth metrics? Is that possible that male and female bats growth different?
```{r, echo=FALSE}
ggplot(data = df, aes(sex, Ra)) +
  geom_violin() + 
  labs(title = "Forearm length",
       y = "Forearm length, mm") +
  mytheme

ggplot(data = df, aes(sex, W)) +
  geom_violin() + 
  labs(title = "Weight",
       y = "Weight, g") +
  mytheme
```

Ra might be slightly sex-dependent, Weight does not show such pattern.

Does Ra or W seem to be different among years?
```{r, echo=FALSE}
ggplot(data = df, aes(Year, Ra)) +
  geom_violin() + 
  labs(title = "Forearm length",
       y = "Ra, mm") +
  mytheme

ggplot(data = df, aes(Year, W)) +
  geom_violin() + 
  labs(title = "Weight",
       y = "W, g") +
  mytheme
```

In our data set, Ra seems to be constant across the years of survey. Contrary, W tends to vary among years. Therefore, to test our hypothesis about spring weather effect on bat growth, we must apply weight-related metric of growth, not Ra-related.


Does Ra or W changes over the inventory time?

```{r, message=FALSE, warning=FALSE}
# t ~ Ra
p_Ra_day_4years <- ggplot(data = df, aes(x = day, y = Ra, colour = Year)) +
  geom_point() +
  geom_smooth(method = "lm", aes(fill = Year)) + 
  labs(title = "Ra ~ DOY",
       y = "Forearm length, mm") +
  mytheme

# t ~ W
p_W_day_4years <- ggplot(data = df, aes(x = day, y = W, colour = Year)) +
  geom_point() +
  geom_smooth(method = "lm", aes(fill = Year)) +
  labs(title = "W ~ DOY",
       y = "Weight, g") + 
  mytheme

p_Ra_day_4years
p_W_day_4years

rm(p_Ra_day_4years, p_W_day_4years)
```

As we can see, Ra remains constant over inventory period, and probably doesn't differ among years (need statistical testing, but gives a hint from the plot). Weight, instead, (i) differs among years, and (ii) grows over the inventory period.

In other words, bats captured later might have higher weight, regardless of spring weather conditions. To minimize an effect of time within inventory period, we calculated series of synthetic growth metrics, and test their variation over the inventory period and between the years.

Check how many bats we captured during the night
```{r, echo=FALSE, message=FALSE}
ggplot(df, aes(day)) +
  geom_histogram() +
  labs(x = "Day of the year",
       y = "Number of bats") +
  facet_wrap(vars(Year)) +
  mytheme
```



Since weight seems to grows during inventory, we substituted raw weight (g) by the residuals of body mass-day of the year regression. Body condition index (BCI) calculated as residuals from a linear regression of the logarithmically transformed weight (W) against the logarithm of the day-of-the-year (day), for each bat individual.

```{r}
# Fit simple linear model
mod <- lm(log(W) ~ log(day), data = df)

# Get residuals
df$BCI <- residuals(mod)

# Drop unused variables
rm(mod)
```

That way we get scaled from -1 to 1, time independent measure of body condition. Inspired by  [Mikryukov et al. 2023](https://www.science.org/doi/10.1126/sciadv.adj8016), and, partly, Scaled mass index - SMI by [Peig and Green 2009](https://nsojournals.onlinelibrary.wiley.com/doi/abs/10.1111/j.1600-0706.2009.17643.x)


## Check different growth metrics for variation during inventory time

Custom function to check dependency of selected growth metric on day across 4 years

```{r}
check_my_var <- function(data, dependent_var, independent_var) {
  
  formula <- formula(paste0(dependent_var, " ~ ", independent_var))

  years <- list("2008", "2011", "2014", "2019")
  
  yearly_stat <- list()
  
  for (i in 1:length(years)) {
    
    # Fit simple linear model
    mod <- lm(formula = formula, data = data[data$Year == years[i],])
    
    # Get response coefficient
    coef <- mod$coefficients[2]
    
    # Get p-value from model summary
    p_val <- summary(mod)$coefficients[,"Pr(>|t|)"][2]
    
    yearly_stat[[i]] <- c(coef, p_val)
    
  }
  
  yearly_stat <- as.data.frame(t(as.data.frame(yearly_stat)))
  rownames(yearly_stat) <- years
  colnames(yearly_stat) <- c("Coefficient", "p_value")
  
  # yearly_stat$sign_level <- ifelse(yearly_stat$p-value > 0.05, 
  #                                  " ", 
  #                                  ifelse(yearly_stat$p-value <= 0.05 & yearly_stat$p-value > 0.01,
  #                                         "*",
  #                                         "***")
  #                                  )
  for (k in 1:nrow(yearly_stat)) {
    
    yearly_stat$sign_level[k] <- if(yearly_stat$p_value[k] > 0.05) {" "} else {"*"}
    
  }
  
  p <- ggplot(data = data, aes_string(x = independent_var, y = dependent_var)) +
    geom_point() +
    geom_smooth(method = "lm") +
    facet_wrap(vars(Year)) +
    mytheme
  
  return(list(yearly_stat, p))
}
```

### Ra

```{r, warning=FALSE, message=FALSE}
check_my_var(df, "Ra", "day")
```

Ra is weakly related to the time of capture. 

### W

```{r, warning=FALSE, message=FALSE}
check_my_var(df, "W", "day")
```

W strongly related to the time of capture.

### BCI
```{r, warning=FALSE, message=FALSE}
check_my_var(df, "BCI", "day")
```

BCI is weakly related to the time of caption, as it was expected from the method of calculation.

BCI showed visual differences among years, suggesting bats grow differently depending on year-specific effects.
```{r, echo=FALSE}
ggplot(data = df, aes(Year, BCI)) +
  geom_violin() + 
  labs(y = "Body Condition Index") +
  mytheme
```

For Homilsha Forest inventory data, 2014 seems to have insufficient number of nights when 10 or more Noctule bat individuals were captured - possibly we should remove it from further analyses.
```{r, message=FALSE}
ggplot(data = df, aes(day, BCI, colour = Year)) +
  geom_point(alpha = 0.5) + 
  geom_smooth(method = "lm", aes(fill = Year)) + 
  labs(x = "Day of the year",
       y = "Body Condition Index") +
  # facet_wrap(vars(sex)) +
  mytheme
```

Therefore, we choose to test two alternative response variables - forearm length (Ra) and Body Condition Index (BCI), as a possible growth metric in our research.


# Test null models of random effect of years on bat growth

Instructions from <https://tobiasroth.github.io/BDAEcology/lmer.html> Additional beginner's guide <https://rstudio-pubs-static.s3.amazonaws.com/63556_e35cc7e2dfb54a5bb551f3fa4b3ec4ae.html>

```{r, message=FALSE}
library (lme4)
# `lme4` requires `Matrix` >= 1.6-4. See for more details https://community.rstudio.com/t/error-in-initializeptr-function-cholmod-factor-ldeta-not-provided-by-package-matrix/178694
```

Null-model (random effect only)

```{r}
mod0Ra <- lmer (Ra ~ 1 + (1|Year),
             data=df
             # REML=F # https://tobiasroth.github.io/BDAEcology/lmer.html#restricted-maximum-likelihood-estimation-reml
             )

summary (mod0Ra)
```

```{r}
summ(mod0Ra)
```

To test the variance of intersepts

```{r}
library(lmerTest)
ranova(mod0Ra)
```



```{r}
mod0BCI <- lmer (BCI ~ 1 + (1|Year),
             data=df
             # REML=F # https://tobiasroth.github.io/BDAEcology/lmer.html#restricted-maximum-likelihood-estimation-reml
             )

summary (mod0BCI)

summ(mod0BCI)
```

To test the variance of intersepts

```{r}
library(lmerTest)
ranova(mod0Ra)
```




Model with one fixed effect - time (as day from the beginning of year)

```{r}
mod1Ra <- lmer (Ra ~ day + (1 |Year),
             data=df
             # REML=F # https://tobiasroth.github.io/BDAEcology/lmer.html#restricted-maximum-likelihood-estimation-reml
             )

summary (mod1Ra)
```

```{r}
library(jtools)
summ(mod1Ra)
```

Tp test the variance of intersepts

```{r}
library(lmerTest)
ranova(mod1Ra)
```

```{r}
plot (mod1Ra)
```





## t \~ W

Make a model with Weight gata of subadult bast Null-model (random effect only)

```{r}
mod0_W <- lmer (W ~ 1 + (1|Year),
             data=df
             # REML=F # https://tobiasroth.github.io/BDAEcology/lmer.html#restricted-maximum-likelihood-estimation-reml
             )


summ(mod0_W)
```

Model weight with one fixed effect - time (as day from the beginning of year)

```{r}
mod1W <- lmer (W ~ day + (1 |Year),
             data=df
             # REML=F # https://tobiasroth.github.io/BDAEcology/lmer.html#restricted-maximum-likelihood-estimation-reml
             )

summ(mod1W)
```

```{r}
library(lmerTest)
ranova(mod1W)
```

```{r}
plot (mod1W)
```

```{r}
ggplot(data = df, aes(x = day, y = W, colour = Year)) +
  geom_point() +
  geom_smooth(method = "lm") +
  facet_wrap(vars(Species),
             scales = "free") 
```

```{r}
mod1 <-  lm(BCI ~ Year, data = df)

summary (mod1)
```



## Generate weather data

```{r}
# Take a look at the timespan
summary(df$date)
```

```{r eval=FALSE, echo=FALSE, message=FALSE}
# # Create data frame with point coordinates
# coords <- data.frame(
#   place = c("R1", "R2", "Fed1", "Fed2", "Fed3", "F1", "F2", "F3", "F4"),
#   lon = c(36.33329, 36.32946, 36.32732, 36.32863, 36.33436, 36.32396, 36.32319, 36.31990, 36.31909),
#   lat = c(49.62554, 49.62092, 49.62298, 49.61411, 49.60477, 49.61782, 49.61169, 49.60948, 49.60782)
# )
# 
# # Retrieve daily weather values using {easyclimate} package
# # Prcp - Total precipitation in mm
# # Tmin - minimal temperature, Celsius degrees
# # Tmax - maximal temperature, Celsius degrees
# 
# daily <- get_daily_climate(
#   coords = coords,
#   period = 2008:2019,
#   climatic_var = c("Prcp","Tmin","Tmax"),
#   output = "df")
# 
# save(daily, file = "daily_weather_2008-2019.Rdata") # save weather data
```

```{r echo=FALSE}
load(file = "daily_weather_2008-2019.Rdata")
```

### Calculate additional weather variables

Calculate derived metrics (diurnial range, mean daily temperature, positive daily temperature). Subset only years of inventory (2008, 2011, 2014, 2019)

```{r}
daily <- daily %>% 
   # Calculate derived metrics for each day
  mutate(DiurnialRange = Tmax - Tmin,
         MeanTemp = (Tmin + Tmax) / 2,
         # Get only positive mean temperatures (for Growing degree units calculation)
         PositiveMeanTemp = ifelse(MeanTemp > 0, MeanTemp, 0)) %>%
  # Adjust dates and add new variables for month and years
  mutate(date = as.Date(date),
         month = months(date),
         year = format(date, format = "%Y")) %>%
  # Filter only years of inventories
  filter(year %in% c(2008, 2011, 2014, 2019))
```

### Calculate GDU

Growing degree units (Sum of the mean daily temperature above 0 from the start of the year). Create custom function that calculate GDUs for each day of the year.

```{r}
# Must be calculated for each year separately.
# Data must contain one row per day and the variable with the positive daily mean temperature.
# If mean temperature is negative, put zero in this variable.
# Also the variable with the full date MUST be character AND named "date"
gdu <- function(daily_data_for_one_year, 
                var_with_PositiveMeanTemp) {
  GDU <- list() # prepare empty list
  
  # looping through the daily data within the year 
  for (i in 1:nrow(daily_data_for_one_year)) {
    GDU[[i]] <- c(daily_data_for_one_year$date[i],
                  sum(daily_data_for_one_year[1:i, var_with_PositiveMeanTemp])
    )
  }
  # reshape obtained list
  GDU <- as.data.frame(GDU)
  GDU <- as.data.frame(t(GDU))
  colnames(GDU) <- c("date", "GDU")
  # retrieve the result
  return(GDU)
}
```

Calculate GDU and add it to the main weather data frame.

```{r}
# List all required years
list_of_years <- c(2008, 2011, 2014, 2019)

# Create an empty list
gdu_by_years <- list()

for (k in 1:length(list_of_years)) {
  # Calculate GDUs for each year
  df_temp <- daily %>% 
    # loop doesn't seem to work with `date` format, convert to character
    mutate(date = as.character(date)) %>%
    filter(year == list_of_years[[k]]) %>% 
    select(place, date, PositiveMeanTemp) %>%
    split(.$place)
  
  # Create an empty list
  df_gdu <- list()
  
  # Loop through the list elements (data frames with all days for the particular year,
  # split by place ID)
  for (i in 1:length(df_temp)) {
    df_gdu[[i]] <- gdu(df_temp[[i]], "PositiveMeanTemp")
    df_gdu[[i]]$place <- df_temp[[i]]$place
  }
  
  # Transform list of data frames into a single data frame
  gdu_by_years[[k]] <- bind_rows(df_gdu)

}

# Transform list of data frames into a single data frame
GDU <- bind_rows(gdu_by_years) %>% 
  mutate(date = as.Date(date))

# Add GDU as additional variable to the daily climate data for required years
daily <- daily %>% 
  left_join(GDU, by = c("date", "place"))

# Drop temporary variables not longer required
rm(df_temp, df_gdu, GDU, gdu_by_years, i, k)
```

## Explore weather data

We selected two periods that are supposed to be influential for bar growth: the *spring* (March 25 - May 24) as a pre-natal period for bat pups, and the *summer* (May 25 - June 24) as an early post-natal period prior to the captures.

Since 2008 was a leap year, Julian days was different. What is March 25 for each year?

```{r}
daily %>% 
  mutate(day = lubridate::yday(date)) %>% 
  select(date, day) %>% 
  filter(month(date) == 3 & day(date) == 25) %>% 
  unique()
```

Excluding dates out of those two periods

```{r}
# Pre-natal (spring) periods only
daily %>% 
  filter(date >= "2008-03-25" & date < "2008-05-25") %>% 
  mutate(season = "spring") -> spring2008

daily %>% 
  filter(date >= "2011-03-25" & date < "2011-05-25") %>% 
  mutate(season = "spring") -> spring2011

daily %>% 
  filter(date >= "2014-03-25" & date < "2014-05-25") %>% 
  mutate(season = "spring") -> spring2014

daily %>% 
  filter(date >= "2019-03-25" & date < "2019-05-25") %>% 
  mutate(season = "spring") -> spring2019

# Post-natal (summer) periods only
daily %>% 
  filter(date >= "2008-05-25" & date < "2008-06-25") %>% 
  mutate(season = "summer") -> summer2008

daily %>% 
  filter(date >= "2011-05-25" & date < "2011-06-25") %>% 
  mutate(season = "summer") -> summer2011

daily %>% 
  filter(date >= "2014-05-25" & date < "2014-06-25") %>% 
  mutate(season = "summer") -> summer2014

daily %>% 
  filter(date >= "2019-05-25" & date < "2019-06-25") %>% 
  mutate(season = "summer") -> summer2019

daily_spring_summer <- bind_rows(spring2008, spring2011, spring2014, spring2019,
                                 summer2008, summer2011, summer2014, summer2019)

# Remove unused temorary variables
rm(spring2008, spring2011, spring2014, spring2019,
   summer2008, summer2011, summer2014, summer2019)
```

Take a look at the minimal temperatures for springs in 2008-2019

```{r}
daily_spring_summer %>% 
  filter(season == "spring") %>% 
  select(date, year, Tmin) |>
  ggplot(aes(Tmin)) +
  geom_density(fill = "lightgreen", 
               alpha = 0.5) +
  facet_wrap( ~ factor(year)) +
  labs(title = "Spring",
       x = "Minimal temperature") +
  theme_bw()

ggsave("./figures/Tmin_2008-2019_density_Spring.png", width = 16, height = 12, units = "cm", dpi = 150)
```

Take a look at the minimal temperatures for summers in 2008-2019

```{r}
daily_spring_summer |>
  filter(season == "summer") %>% 
  select(date, year, Tmin) |>
  ggplot(aes(Tmin)) +
  geom_density(fill = "lightgreen", 
               alpha = 0.5) +
  facet_wrap( ~ factor(year)) +
  labs(title = "Summer",
       x = "Minimal temperature") +
  theme_bw()

ggsave("./figures/Tmin_2008-2019_density_Apr.png", width = 16, height = 12, units = "cm", dpi = 150)
```

## Generate exploratory variables for bat growth \~ weather models

```{r}
# Cumulative precipitation
daily_spring_summer %>% 
  group_by(season, place, year) %>% 
  summarise(sum(Prcp)) %>% 
  rename(Prcp = 4) %>% 
  as_tibble() -> Prcp_var

# Split spring only precipitation
Prcp_var %>% 
  filter(season == "spring") %>% 
  rename(Prcp_spr = Prcp) %>% 
  select(-season) -> Prcp_spring

# Split summer only precipitation
Prcp_var %>% 
  filter(season == "summer") %>% 
  rename(Prcp_summ = Prcp) %>% 
  select(-season) -> Prcp_summer


# Average minimum daily temperature
daily_spring_summer %>% 
  group_by(season, place, year) %>% 
  summarise(mean(Tmin)) %>% 
  rename(Tmin = 4) %>% 
  as_tibble() -> Tmin_var

# Dissect only spring minimal temperatures
Tmin_var %>% 
  filter(season == "spring") %>% 
  rename(Tmin_spr = Tmin) %>% 
  select(-season) -> Tmin_spring

# Dissect only spring minimal temperatures
Tmin_var %>% 
  filter(season == "summer") %>% 
  rename(Tmin_summ = Tmin) %>% 
  select(-season) -> Tmin_summer

# Number of days with mean temperature less or equal 10 Celsius degree
daily_spring_summer %>% 
  filter(season == "spring") %>% 
  filter(MeanTemp <= 10) %>% 
  count(season, place, year) %>% 
  as_tibble() %>% 
  rename(Less10_var = n) %>% 
  select(-season) -> Less10_var


# GDU at the end of a spring period
daily_spring_summer %>% 
  filter(month(date) == 5 & day(date) == 24) %>% 
  select(place, year, GDU) %>% 
  rename(GDU_spr = GDU) -> GDU_spring

# GDU at the end of a summer period
daily_spring_summer %>% 
  filter(month(date) == 6 & day(date) == 24) %>% 
  select(place, year, GDU) %>% 
  rename(GDU_summ = GDU) -> GDU_summer

# Merge weather covariates
Prcp_spring %>% 
  left_join(Prcp_summer) %>% 
  left_join(Tmin_spring) %>% 
  left_join(Tmin_summer) %>% 
  left_join(Less10_var) %>% 
  left_join(GDU_spring) %>% 
  left_join(GDU_summer) %>% 
  rename(Place = place,
         Year = year) -> covariates

# Drop unused variables
rm(Prcp_spring, Prcp_var, Prcp_summer, Tmin_spring, Tmin_summer, Tmin_var, 
   GDU_summer, GDU_spring, Less10_var, daily_spring_summer)

```

Merge weather data with bat survey data and save it for further sessions

```{r}
# Merge data
df_clim <- df %>% 
  left_join(covariates)

# Export climate data for further sessions
save(df_clim, file = "bats_wClimate_2008-2019.Rdata")
```
